import{d as E,o as f,z as b,b as n,k as $,D as U,_ as M,r as v,c as I,w as c,G as A,e as C,t as w,H as W,I as O,J as K,j as P,K as J,a as k,L as Y,E as q}from"./index.112cb797.js";var H=E({name:"Delete"});const Q={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},R=n("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1);function X(e,t,l,u,m,d){return f(),b("svg",Q,[R])}H.render=X;H.__file="packages/components/Delete.vue";var Z=H,L=E({name:"Plus"});const x={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ee=n("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1);function te(e,t,l,u,m,d){return f(),b("svg",x,[ee])}L.render=te;L.__file="packages/components/Plus.vue";var ae=L,N=E({name:"Search"});const ne={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},oe=n("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1);function le(e,t,l,u,m,d){return f(),b("svg",ne,[oe])}N.render=le;N.__file="packages/components/Search.vue";var se=N;const re=E({props:{data:{type:Array,default:()=>[]},select:{type:Array,default:()=>[]},showIndex:{type:Boolean,default:!1},showSelection:{type:Boolean,default:!1},showPage:{type:Boolean,default:!0},page:{type:Object,default:()=>({index:1,size:20,total:0})},pageLayout:{type:String,default:"total, sizes, prev, pager, next, jumper"},pageSizes:{type:Array,default:[10,20,50,100]}},setup(e,t){const l=$(null);let u=null;const m=i=>{u?e.page.index=1:(e.page.index=i,t.emit("getTableData"))},d=i=>{u="work",setTimeout(()=>{u=null},100),e.page.size=i,t.emit("getTableData",!0)},s=i=>{t.emit("selection-change",i)};return U(()=>{l.value.doLayout()}),{table:l,handleCurrentChange:m,handleSizeChange:d,handleSelectionChange:s}}}),ie={class:"system-table-box"};function ue(e,t,l,u,m,d){const s=v("el-table-column"),i=v("el-table"),y=v("el-pagination");return f(),I("div",ie,[n(i,O(e.$attrs,{ref:"table",class:"system-table",border:"",height:"100%",data:e.data,onSelectionChange:e.handleSelectionChange}),{default:c(()=>[e.showSelection?(f(),b(s,{key:0,type:"selection",align:"center",width:"50"})):A("",!0),e.showIndex?(f(),b(s,{key:1,label:"\u5E8F\u53F7",width:"60",align:"center"},{default:c(g=>[C(w((e.page.index-1)*e.page.size+g.$index+1),1)]),_:1})):A("",!0),W(e.$slots,"default",{},void 0,!0)]),_:3},16,["data","onSelectionChange"]),e.showPage?(f(),b(y,{key:0,"current-page":e.page.index,"onUpdate:current-page":t[0]||(t[0]=g=>e.page.index=g),class:"system-page",background:"",layout:e.pageLayout,total:e.page.total,"page-size":e.page.size,"page-sizes":e.pageSizes,onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["current-page","layout","total","page-size","page-sizes","onCurrentChange","onSizeChange"])):A("",!0)])}var de=M(re,[["render",ue],["__scopeId","data-v-1a94e188"]]);function pe(e){return K({url:"/pc/terminal/list",method:"post",data:e})}function ce(e){return K({url:"/table/del",method:"post",data:e})}const me=E({name:"crudTable",components:{Table:de},setup(){const e=P({input:""}),t=P({show:!1,title:"\u65B0\u589E",showButton:!0}),l=P({index:1,size:10,total:0}),u=$(!0),m=$(""),d=$(""),s=$("");function i(o){var a=new Date(o),h=a.getFullYear(),D=a.getMonth()+1;D=D<10?"0"+D:D;var _=a.getDate();_=_<10?"0"+_:_;var T=a.getHours();T=T<10?"0"+T:T;var S=a.getMinutes();S=S<10?"0"+S:S;var z=a.getSeconds();return z=z<10?"0"+z:z,h+"-"+D+"-"+_+" "+T+":"+S+":"+z}const y=o=>{o==null?(d.value="",s.value=""):(d.value=i(m.value[0]),s.value=i(m.value[1]))},g=$([]),p=$([]),B=o=>{p.value=o},V=[{text:"Last week",value:()=>{const o=new Date,a=new Date;return a.setTime(a.getTime()-3600*1e3*24*7),[a,o]}},{text:"Last month",value:()=>{const o=new Date,a=new Date;return a.setTime(a.getTime()-3600*1e3*24*30),[a,o]}},{text:"Last 3 months",value:()=>{const o=new Date,a=new Date;return a.setTime(a.getTime()-3600*1e3*24*90),[a,o]}}],r=o=>{u.value=!0,o&&(l.index=1);let a={Page:l.index,Count:l.size,KeyWord:e.input,StartTime:d.value,EndTime:s.value};pe(a).then(h=>{h.Data,g.value=h.Data,l.total=Number(h.Sum)}).catch(h=>{g.value=[],l.index=1,l.total=0}).finally(()=>{u.value=!1})},F=o=>{let a={ids:o.map(h=>h.id).join(",")};ce(a).then(h=>{q({type:"success",message:"\u5220\u9664\u6210\u529F"}),r(g.value.length===1)})},j=()=>{t.title="\u65B0\u589E\u6570\u636E",t.show=!0,delete t.row},G=o=>{t.title="\u7F16\u8F91\u6570\u636E",t.row=o,t.show=!0};return r(!0),{Plus:ae,Search:se,Delete:Z,KeyWord:e,datetimes:m,tableData:g,chooseData:p,loading:u,page:l,layer:t,StartTime:d,EndTime:s,shortcuts:V,handleSelectionChange:B,handleAdd:j,handleEdit:G,handleDel:F,getTableData:r,timeFn1:y}}}),ge={class:"layout-container"},he={class:"layout-container-form flex space-between"},ve={class:"layout-container-form-handle"},fe={class:"layout-container-form-search"},$e={class:"layout-container-table"};function be(e,t,l,u,m,d){const s=v("el-button"),i=v("el-popconfirm"),y=v("el-date-picker"),g=v("el-input"),p=v("el-table-column"),B=v("Table"),V=J("loading");return f(),I("div",ge,[k("div",he,[k("div",ve,[n(s,{type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:c(()=>[C(w(e.$t("message.common.add")),1)]),_:1},8,["icon","onClick"]),n(i,{title:e.$t("message.common.delTip"),onConfirm:t[0]||(t[0]=r=>e.handleDel(e.chooseData))},{reference:c(()=>[n(s,{type:"danger",icon:e.Delete,disabled:e.chooseData.length===0},{default:c(()=>[C(w(e.$t("message.common.delBat")),1)]),_:1},8,["icon","disabled"])]),_:1},8,["title"])]),k("div",fe,[n(y,{class:"search-tp",modelValue:e.datetimes,"onUpdate:modelValue":t[1]||(t[1]=r=>e.datetimes=r),type:"daterange","unlink-panels":"","range-separator":e.$t("message.common.toTime"),"start-placeholder":e.$t("message.common.startTime"),"end-placeholder":e.$t("message.common.endTime"),shortcuts:e.shortcuts,onChange:e.timeFn1},null,8,["modelValue","range-separator","start-placeholder","end-placeholder","shortcuts","onChange"]),n(g,{modelValue:e.KeyWord.input,"onUpdate:modelValue":t[2]||(t[2]=r=>e.KeyWord.input=r),placeholder:e.$t("message.common.searchTip"),onChange:t[3]||(t[3]=r=>e.getTableData(!0))},null,8,["modelValue","placeholder"]),n(s,{type:"primary",icon:e.Search,class:"search-btn",onClick:t[4]||(t[4]=r=>e.getTableData(!0))},{default:c(()=>[C(w(e.$t("message.common.search")),1)]),_:1},8,["icon"])])]),k("div",$e,[Y((f(),b(B,{ref:"table",page:e.page,"onUpdate:page":t[5]||(t[5]=r=>e.page=r),showIndex:!0,showSelection:!0,data:e.tableData,onGetTableData:e.getTableData,onSelectionChange:e.handleSelectionChange},{default:c(()=>[n(p,{prop:"TerminalId",label:"\u7EC8\u7AEF\u7F16\u53F7",align:"center"}),n(p,{prop:"TerminalName",label:"\u7EC8\u7AEF\u540D\u79F0",align:"center"}),n(p,{prop:"GroupName",label:"\u6240\u5C5E\u5206\u7EC4",align:"center"}),n(p,{prop:"TerminalTypeExplainName",label:"\u7EC8\u7AEF\u7C7B\u578B",align:"center"}),n(p,{prop:"ContractOne",label:"\u8054\u7CFB\u4EBA",align:"center"}),n(p,{prop:"ContractPhoneOne",label:"\u8054\u7CFB\u7535\u8BDD",align:"center"}),n(p,{prop:"Address",label:"\u5730\u5740",width:"300",align:"center"}),n(p,{label:e.$t("message.common.handle"),align:"center",fixed:"right",width:"200"},{default:c(r=>[n(s,{onClick:F=>e.handleEdit(r.row)},{default:c(()=>[C(w(e.$t("message.common.update")),1)]),_:2},1032,["onClick"]),n(i,{title:e.$t("message.common.delTip"),onConfirm:F=>e.handleDel([r.row])},{reference:c(()=>[n(s,{type:"danger"},{default:c(()=>[C(w(e.$t("message.common.del")),1)]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["label"])]),_:1},8,["page","data","onGetTableData","onSelectionChange"])),[[V,e.loading]])])])}var we=M(me,[["render",be]]);export{we as default};
